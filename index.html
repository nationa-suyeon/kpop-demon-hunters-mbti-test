<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ ìºë¦­í„° ìœ í˜• í…ŒìŠ¤íŠ¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Softer shadow */
            max-width: 600px;
            width: 100%;
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .btn {
            background-image: linear-gradient(to right, #6EE7B7, #34D399); /* Green gradient */
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 9999px; /* Pill shape */
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 211, 153, 0.4);
            border: none;
            cursor: pointer;
            font-size: 1.125rem; /* Larger font */
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 211, 153, 0.6);
        }
        .option-btn {
            background-color: #E0F2F7; /* Light blue */
            color: #2C3E50; /* Dark text */
            padding: 1rem 1.5rem;
            margin: 0.5rem 0;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
            text-align: left;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .option-btn:hover {
            background-color: #B3E0F2; /* Slightly darker blue on hover */
            border-color: #007BFF; /* Blue border on hover */
        }
        .option-btn.selected {
            background-color: #3B82F6; /* Blue */
            color: white;
            border-color: #1D4ED8;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 9999px;
            height: 0.75rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-image: linear-gradient(to right, #3B82F6, #60A5FA); /* Blue gradient */
            width: 0%;
            border-radius: 9999px;
            transition: width 0.3s ease-in-out;
        }
        .character-card {
            background-color: #F8F9FA; /* Off-white */
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            text-align: left;
            width: 100%;
        }
        .character-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 0.5rem;
        }
        .character-card p {
            font-size: 1rem;
            color: #555;
            line-height: 1.5;
        }
        .character-video-container {
            width: 150px; /* Adjust size as needed */
            height: 150px;
            background-color: #ddd; /* Placeholder background */
            border-radius: 50%;
            margin: 1rem auto;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            color: #888;
            overflow: hidden; /* Ensure content stays within circle */
            position: relative; /* For absolute positioning of inner elements */
        }
        .character-video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures video fills the circular container */
            border-radius: 50%; /* Make video circular */
            display: block;
        }
        /* Simple animation for result display */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .result-section {
            animation: fadeInScale 0.5s ease-out forwards;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            .btn {
                padding: 0.6rem 1.5rem;
                font-size: 1rem;
            }
            .option-btn {
                padding: 0.8rem 1rem;
                font-size: 0.9rem;
            }
            .character-card h3 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">
    <div class="container">
        <!-- ëœë”© í˜ì´ì§€ -->
        <div id="landing-page" class="flex flex-col items-center justify-center">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-6 leading-tight">
                <span class="block">K-pop ë°ëª¬ í—Œí„°ìŠ¤</span>
                <span class="block mt-2">ë‚˜ëŠ” ëˆ„êµ¬?</span>
            </h1>
            <p class="text-lg text-gray-600 mb-8">ì‹œë‚˜ë¦¬ì˜¤ ì† ë‹¹ì‹ ì˜ ì„ íƒì€?</p>
            <button id="start-test-btn" class="btn">1ë¶„ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
        </div>

        <!-- ì§ˆë¬¸ í˜ì´ì§€ -->
        <div id="question-page" class="hidden w-full">
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <p id="question-number" class="text-lg text-gray-700 mb-4 font-semibold"></p>
            <h2 id="question-text" class="text-2xl font-bold text-gray-800 mb-8 leading-relaxed"></h2>
            <div class="options-container flex flex-col gap-4">
                <button id="option-a" class="option-btn" data-value="1"></button>
                <button id="option-b" class="option-btn" data-value="0"></button>
            </div>
        </div>

        <!-- ê²°ê³¼ í˜ì´ì§€ -->
        <div id="result-page" class="hidden w-full result-section">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">ë‹¹ì‹ ì˜ ìºë¦­í„°ëŠ”...</h2>
            <div class="character-video-container">
                <!-- ì‹¤ì œ ìºë¦­í„° ë™ì˜ìƒìœ¼ë¡œ êµì²´ë  ê³³ -->
                <video id="character-video" autoplay loop muted playsinline class="hidden">
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <!-- ë¹„ë””ì˜¤ê°€ ë¡œë“œë˜ì§€ ì•Šì„ ë•Œ í‘œì‹œë  ì„ì‹œ ì•„ì´ì½˜ -->
                <span id="character-icon" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">âœ¨</span>
            </div>
            <h3 id="result-character-name" class="text-4xl font-extrabold text-blue-600 mt-4 mb-2"></h3>
            <p id="result-mbti" class="text-xl font-semibold text-gray-700 mb-2"></p>
            <p id="result-description" class="text-md text-gray-600 mb-8 leading-relaxed"></p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                <div class="character-card">
                    <h3 class="text-blue-500">ì˜ ë§ëŠ” ì¹œêµ¬</h3>
                    <p id="compatible-friend-name" class="text-xl font-semibold text-gray-800"></p>
                    <p id="compatible-friend-mbti" class="text-md text-gray-600"></p>
                    <p id="compatible-friend-description" class="text-sm text-gray-500 mt-1 leading-snug"></p>
                </div>
                <div class="character-card">
                    <h3 class="text-red-500">ì•™ìˆ™ ì¹œêµ¬</h3>
                    <p id="opposite-friend-name" class="text-xl font-semibold text-gray-800"></p>
                    <p id="opposite-friend-mbti" class="text-md text-gray-600"></p>
                    <p id="opposite-friend-keywords" class="text-sm text-gray-500 mt-1"></p>
                </div>
            </div>

            <div class="mt-8 flex flex-col gap-4 w-full">
                <button id="share-result-btn" class="btn bg-blue-500 hover:bg-blue-600">ê²°ê³¼ ê³µìœ í•˜ê³  ì¹œêµ¬ ì´ˆëŒ€</button>
                <button id="hey-d-link-btn" class="btn bg-purple-500 hover:bg-purple-600">K-pop ë°ëª¬ í—Œí„°ìŠ¤ ì£¼ì¸ê³µë“¤ê³¼ ì‹¤ì‹œê°„ ëŒ€í™”í•˜ê¸°</button>
                <button id="restart-test-btn" class="btn bg-gray-400 hover:bg-gray-500">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const landingPage = document.getElementById('landing-page');
        const questionPage = document.getElementById('question-page');
        const resultPage = document.getElementById('result-page');
        const startTestBtn = document.getElementById('start-test-btn');
        const questionNumberElem = document.getElementById('question-number');
        const questionTextElem = document.getElementById('question-text');
        const optionAButton = document.getElementById('option-a');
        const optionBButton = document.getElementById('option-b');
        const progressBar = document.getElementById('progress-bar');

        const resultCharacterNameElem = document.getElementById('result-character-name');
        const resultMbtiElem = document.getElementById('result-mbti');
        const resultDescriptionElem = document.getElementById('result-description');
        const characterVideoElem = document.getElementById('character-video'); // ë¹„ë””ì˜¤ ìš”ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        const characterIconElem = document.getElementById('character-icon'); // ì„ì‹œ ì•„ì´ì½˜ ìš”ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

        const compatibleFriendNameElem = document.getElementById('compatible-friend-name');
        const compatibleFriendMbtiElem = document.getElementById('compatible-friend-mbti');
        const compatibleFriendDescriptionElem = document.getElementById('compatible-friend-description');
        const oppositeFriendNameElem = document.getElementById('opposite-friend-name');
        const oppositeFriendMbtiElem = document.getElementById('opposite-friend-mbti');
        const oppositeFriendKeywordsElem = document.getElementById('opposite-friend-keywords');

        const shareResultBtn = document.getElementById('share-result-btn');
        const heyDLinkBtn = document.getElementById('hey-d-link-btn');
        const restartTestBtn = document.getElementById('restart-test-btn');

        // í…ŒìŠ¤íŠ¸ ìƒíƒœ ë³€ìˆ˜
        let currentQuestionIndex = 0;
        // ë¬¸í•­ ìˆ˜ë¥¼ 8ê°œë¡œ ì¡°ì •í–ˆìœ¼ë¯€ë¡œ answers ë°°ì—´ í¬ê¸°ë„ 8ë¡œ ì¡°ì •
        let answers = new Array(8).fill(-1); // 0 ë˜ëŠ” 1ë¡œ ì±„ì›Œì§ˆ ë‹µë³€ ë°°ì—´

        // MBTI ì§„ë‹¨ ì„¤ë¬¸ 8 ë¬¸í•­ í’€ (ê° ì¶•ë³„ 2ê°œ ë¬¸í•­)
        // ê° ë¬¸í•­ì€ [ì§ˆë¬¸ í…ìŠ¤íŠ¸, ì„ íƒì§€ A í…ìŠ¤íŠ¸, ì„ íƒì§€ B í…ìŠ¤íŠ¸, í•´ë‹¹ ì¶•]
        const questions = [
            // E-I ì¶• (2ë¬¸í•­)
            { q: "ë‹¹ì‹ ì€ K-pop ì•„ì´ëŒ ê·¸ë£¹ 'í—ŒíŠ¸ë¦­ìŠ¤'ì˜ ë©¤ë²„. ì›”ë“œ íˆ¬ì–´ ë§ˆì§€ë§‰ ê³µì—°ì„ ì•ë‘ê³  ìˆë‹¤. ê³µì—°íŒ€ì´ ë‚´ì¼ ì½˜ì„œíŠ¸ë¥¼ ì•ë‘ê³  íŒŒì´íŒ… íŒŒí‹°ë¥¼ í•˜ìê³  í•˜ëŠ”ë°,", a: "í•¨ê»˜ ì°¸ì—¬í•´ ì¸ì‚¬ë¥¼ ë‚˜ëˆ„ê³  í˜ì„ ì–»ê³  ì¶©ì „í• ê²Œìš”.", b: "ë‚´ì¼ ê³µì—°ì´ í˜ë“¤ì§€ ì•Šê²Œ ì˜¤ëŠ˜ì€ ë¨¼ì € ë“¤ì–´ê°€ì„œ ì‰´ê²Œìš”.", axis: "EI" },
            { q: "ì‹œìƒì‹ ê°™ì€ ëŒ€ê·œëª¨ í–‰ì‚¬ì— ì°¸ì„í•˜ëŠ” ê²ƒì€ ë‹¹ì‹ ì—ê²Œ ì–´ë–¤ ê¸°ë¶„ì¸ê°€ìš”?", a: "ìˆ˜ë§ì€ íŒ¬ë“¤ê³¼ ì—ë„ˆì§€ë¥¼ ì£¼ê³ ë°›ëŠ” ì¦ê±°ìš´ ì‹œê°„ì´ì—ìš”.", b: "ë§ì€ ì‚¬ëŒ ì†ì—ì„œ ì—ë„ˆì§€ê°€ ì†Œëª¨ë˜ì–´ í”¼ê³¤í•¨ì„ ëŠê»´ìš”.", axis: "EI" },

            // S-N ì¶• (2ë¬¸í•­)
            { q: "ë¹„í–‰ê¸° í•˜ì´ì¬í‚¹ ìƒí™©, ì•…ê·€ë“¤ì´ ë‚˜íƒ€ë‚¬ë‹¤! ê¸´ê¸‰ ìƒí™©ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ë°œìƒí•œë‹¤ë©´?", a: "ê¸°ì¡´ ë°©ì‹ì— ì–½ë§¤ì´ì§€ ì•Šê³ , ë– ì˜¤ë¥´ëŠ” ëŒ€ë¡œ ë¸Œë ˆì¸ìŠ¤í† ë°í•´ìš”.", b: "ê³¼ê±° ì‚¬ë¡€ë‚˜ ë°ì´í„°ë¥¼ ë¨¼ì € ì¡°ì‚¬í•˜ë©° í˜„ì‹¤ì ì¸ í•´ê²°ì±…ì„ ì°¾ì•„ìš”.", axis: "SN" },
            { q: "ìƒˆë¡œìš´ ì•…ê·€ í‡´ì¹˜ ê¸°ìˆ ì„ ë°°ì›Œì•¼ í•œë‹¤ë©´, ë‹¹ì‹ ì˜ í•™ìŠµ ë°©ì‹ì€?", a: "ì§ì ‘ ë§Œì ¸ë³´ê³  ê²½í—˜í•˜ë©° ëª¸ìœ¼ë¡œ ìµí˜€ìš”.", b: "ê´€ë ¨ ë§¤ë‰´ì–¼ì´ë‚˜ ì´ë¡ ë¶€í„° ê¼¼ê¼¼íˆ ì½ìœ¼ë©° ì´í•´í•´ìš”.", axis: "SN" },

            // T-F ì¶• (2ë¬¸í•­)
            { q: "ì•…ê·€ 'ê·€ë§ˆ'ì™€ì˜ íšŒì˜ ì¤‘ ë…¼ìŸì´ ìƒê²¼ì„ ë•Œ, ë‹¹ì‹ ì˜ ëŒ€ì‘ ë°©ì‹ì€?", a: "ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ë“í•˜ì—¬ ìƒëŒ€ë°©ì„ ì´í•´ì‹œí‚¬ê²Œìš”.", b: "ë¶„ìœ„ê¸°ë¥¼ ì¡°ìœ¨í•˜ê³  ê´€ê³„ë¥¼ í•´ì¹˜ì§€ ì•Šë„ë¡ ë…¸ë ¥í• ê²Œìš”.", axis: "TF" },
            { q: "í˜ë“¤ì–´í•˜ëŠ” ë©¤ë²„ì—ê²Œ ì¡°ì–¸ì„ í•´ì¤˜ì•¼ í•œë‹¤ë©´?", a: "ê°ê´€ì ì¸ íŒ©íŠ¸ ê¸°ë°˜ì˜ í•´ê²°ì±…ì„ ì œì‹œí•´ìš”.", b: "ë¨¼ì € ê³µê°í•˜ê³  ìœ„ë¡œí•˜ë©° ê°ì •ì ì¸ ì§€ì§€ë¥¼ ë³´ë‚´ìš”.", axis: "TF" },

            // J-P ì¶• (2ë¬¸í•­)
            { q: "2ì£¼ê°„ì˜ íœ´ì‹ê¸°ê°€ ì£¼ì–´ì¡Œë‹¤. ë‹¹ì‹ ì˜ ì£¼ë§ ê³„íšì€?", a: "ë¯¸ë¦¬ ì„¸ì„¸í•˜ê²Œ ê³„íšì„ ì§œì„œ íš¨ìœ¨ì ìœ¼ë¡œ ë³´ë‚¼ë˜ìš”.", b: "ì¦‰í¥ì ìœ¼ë¡œ ê·¸ë•Œê·¸ë•Œ í•˜ê³  ì‹¶ì€ ê²ƒì„ ì¦ê¸¸ë˜ìš”.", axis: "JP" },
            { q: "í•´ì™¸ ê³µì—° ì¶œì¥ ì „ë‚  ì§ ì‹¸ê¸°ëŠ”?", a: "ì¼ì£¼ì¼ ì „ë¶€í„° ë¯¸ë¦¬ë¯¸ë¦¬ ì™„ë£Œí•´ìš”.", b: "ê³µì—° ë‹¹ì¼ ì•„ì¹¨ì— ê¸‰í•˜ê²Œ ì±™ê²¨ìš”.", axis: "JP" },
        ];

        // ìºë¦­í„° & MBTI ë§¤í•‘ ë° í‚¤ì›Œë“œ ë° ì„¤ëª…
        const MBTI_DATA = {
            "ENTJ": { name: "ë£¨ë¯¸ (Huntr/x)", keywords: "ë¦¬ë”ì‹­Â·ì „ëµÂ·ê²°ë‹¨", icon: "ğŸ‘‘", description: "ê°•ë ¥í•œ ë¦¬ë”ì‹­ê³¼ ì „ëµì ì¸ íŒë‹¨ìœ¼ë¡œ íŒ€ì„ ì´ë„ëŠ” ë‹¹ì‹ ì€, í—ŒíŠ¸ë¦­ìŠ¤ì˜ ë¦¬ë” ë£¨ë¯¸ì²˜ëŸ¼ ì–´ë–¤ ìƒí™©ì—ì„œë„ ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°‘ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/60A5FA/FFFFFF/mp4?text=Rumi" },
            "ENFP": { name: "ë¯¸ë¼ (Huntr/x)", keywords: "ììœ Â·ì°½ì˜Â·ì—´ì •", icon: "ğŸŒˆ", description: "ììœ ë¡œìš´ ì˜í˜¼ê³¼ ë„˜ì¹˜ëŠ” ì°½ì˜ë ¥, ê·¸ë¦¬ê³  ëœ¨ê±°ìš´ ì—´ì •ìœ¼ë¡œ ì£¼ë³€ì„ ë°íˆëŠ” ë‹¹ì‹ ì€, í—ŒíŠ¸ë¦­ìŠ¤ì˜ ììœ ë¶„ë°©í•œ ë¯¸ë¼ì™€ ë‹®ì•˜ì–´ìš”.", videoUrl: "https://placehold.co/150x150/FACC15/FFFFFF/mp4?text=Mira" },
            "ENTP": { name: "ì¡°ì´ (Huntr/x)", keywords: "ì¬ì¹˜Â·ì‹¤í—˜Â·ë³€í™”", icon: "ğŸ’¡", description: "ë²ˆëœ©ì´ëŠ” ì¬ì¹˜ì™€ ëŠì„ì—†ëŠ” ì‹¤í—˜ ì •ì‹ ìœ¼ë¡œ ë³€í™”ë¥¼ ì¶”êµ¬í•˜ëŠ” ë‹¹ì‹ ì€, í—ŒíŠ¸ë¦­ìŠ¤ì˜ ë…íŠ¹í•œ ë§¤ë ¥ ì¡°ì´ì™€ í†µí•©ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/A78BFA/FFFFFF/mp4?text=Joy" },
            "INFJ": { name: "ì§€ëˆ„ (Saja Boys)", keywords: "ì´ìƒÂ·ë¹„ì „Â·í—Œì‹ ", icon: "âœ¨", description: "ë†’ì€ ì´ìƒê³¼ ëšœë ·í•œ ë¹„ì „ì„ ê°€ì§€ê³  íƒ€ì¸ì„ ìœ„í•´ í—Œì‹ í•˜ëŠ” ë‹¹ì‹ ì€, ì‚¬ì ë³´ì´ì¦ˆì˜ ì‹ ë¹„ë¡œìš´ ì§€ëˆ„ì²˜ëŸ¼ ê¹Šì€ ë‚´ë©´ì„ ê°€ì¡Œì–´ìš”.", videoUrl: "https://placehold.co/150x150/34D399/FFFFFF/mp4?text=Jinu" },
            "ESFP": { name: "ë¡œë§¨ìŠ¤ ì‚¬ì", keywords: "íŒ¬ì„œë¹„ìŠ¤Â·ì‚¬êµÂ·ê¸ì •", icon: "ğŸ’–", description: "ë„˜ì¹˜ëŠ” íŒ¬ì„œë¹„ìŠ¤ì™€ íƒ€ê³ ë‚œ ì‚¬êµì„±, ê·¸ë¦¬ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¡œ ëª¨ë‘ë¥¼ ì¦ê²ê²Œ í•˜ëŠ” ë‹¹ì‹ ì€, ë¡œë§¨ìŠ¤ ì‚¬ìì²˜ëŸ¼ ë§¤ë ¥ì ì…ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/EC4899/FFFFFF/mp4?text=Romance+Lion" },
            "INTP": { name: "ë¯¸ìŠ¤í„°ë¦¬ ì‚¬ì", keywords: "ë¶„ì„Â·í˜¸ê¸°ì‹¬Â·ë…ë¦½", icon: "ğŸ”", description: "ë‚ ì¹´ë¡œìš´ ë¶„ì„ë ¥ê³¼ ëì—†ëŠ” í˜¸ê¸°ì‹¬ìœ¼ë¡œ ë…ë¦½ì ì¸ ì‚¬ê³ ë¥¼ í•˜ëŠ” ë‹¹ì‹ ì€, ë¯¸ìŠ¤í„°ë¦¬ ì‚¬ìì²˜ëŸ¼ ìì‹ ë§Œì˜ ì„¸ê³„ë¥¼ íƒêµ¬í•©ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/6B7280/FFFFFF/mp4?text=Mystery+Lion" },
            "ESTP": { name: "ì• ë¹„ ì‚¬ì", keywords: "ì•¡ì…˜Â·ì—ë„ˆì§€Â·ì¦‰í¥", icon: "ğŸ’¥", description: "ë„˜ì¹˜ëŠ” ì—ë„ˆì§€ì™€ ì¦‰í¥ì ì¸ ì•¡ì…˜ìœ¼ë¡œ ìƒí™©ì„ ì£¼ë„í•˜ëŠ” ë‹¹ì‹ ì€, ì• ë¹„ ì‚¬ìì²˜ëŸ¼ ê±°ì¹¨ì—†ì´ ëŒì§„í•˜ëŠ” ë§¤ë ¥ì´ ìˆì–´ìš”.", videoUrl: "https://placehold.co/150x150/EF4444/FFFFFF/mp4?text=Abbey+Lion" },
            "ISFP": { name: "ë² ì´ë¹„ ì‚¬ì", keywords: "ìˆœìˆ˜Â·ê°ì„±Â·ìœ ì—°", icon: "ğŸŒ¸", description: "ìˆœìˆ˜í•œ ê°ì„±ê³¼ ìœ ì—°í•œ ì‚¬ê³ ë¡œ ì„¸ìƒì„ ë°”ë¼ë³´ëŠ” ë‹¹ì‹ ì€, ë² ì´ë¹„ ì‚¬ìì²˜ëŸ¼ ì„¬ì„¸í•˜ê³  ì˜ˆìˆ ì ì¸ ê°ê°ì„ ì§€ë…”ìŠµë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/FDBA74/FFFFFF/mp4?text=Baby+Lion" },
            "ISTP": { name: "ê¹Œì¹˜ â€˜ì¨ì”¨â€™", keywords: "ê´€ì°°Â·ì •ì°°Â·ì‹¤ìš©", icon: "ğŸ› ï¸", description: "ì˜ˆë¦¬í•œ ê´€ì°°ë ¥ê³¼ ë›°ì–´ë‚œ ì‹¤ìš©ì„±ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë‹¹ì‹ ì€, ê¹Œì¹˜ 'ì¨ì”¨'ì²˜ëŸ¼ ì¡°ìš©í•˜ì§€ë§Œ ê°•í•œ ì¡´ì¬ê°ì„ ë“œëŸ¬ëƒ…ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/1F2937/FFFFFF/mp4?text=Kkachi" },
            "ISFJ": { name: "í˜¸ë‘ì´ â€˜ë”í”¼â€™", keywords: "ë³´í˜¸Â·í—Œì‹ Â·ì•ˆì •", icon: "ğŸ»", description: "ì£¼ë³€ ì‚¬ëŒë“¤ì„ ë³´í˜¸í•˜ê³  í—Œì‹ í•˜ë©° ì•ˆì •ê°ì„ ì£¼ëŠ” ë‹¹ì‹ ì€, í˜¸ë‘ì´ 'ë”í”¼'ì²˜ëŸ¼ ë“ ë“ í•˜ê³  ë¯¿ìŒì§í•œ ì¡´ì¬ì…ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/9CA3AF/FFFFFF/mp4?text=Horangi" },
            "INFP": { name: "í•œì•½ë°© ì•„ì €ì”¨", keywords: "ì¹˜ìœ Â·ì´ìƒì£¼ì˜Â·êµê°", icon: "ğŸŒ¿", description: "íƒ€ì¸ì„ ì¹˜ìœ í•˜ê³  ë†’ì€ ì´ìƒì„ ì¶”êµ¬í•˜ë©° ê¹Šì´ êµê°í•˜ëŠ” ë‹¹ì‹ ì€, í•œì•½ë°© ì•„ì €ì”¨ì²˜ëŸ¼ ë”°ëœ»í•˜ê³  ì‚¬ë ¤ ê¹Šì€ ë§ˆìŒì„ ê°€ì¡Œì–´ìš”.", videoUrl: "https://placehold.co/150x150/10B981/FFFFFF/mp4?text=Herbalist" },
            "INTJ": { name: "ê·€ë§ˆ (ì•…ë§ˆì™•)", keywords: "ì „ëµÂ·ì•¼ë§Â·í†µì œ", icon: "ğŸ˜ˆ", description: "ì¹˜ë°€í•œ ì „ëµê³¼ ê±°ëŒ€í•œ ì•¼ë§ìœ¼ë¡œ ëª¨ë“  ê²ƒì„ í†µì œí•˜ë ¤ëŠ” ë‹¹ì‹ ì€, ì•…ë§ˆì™• ê·€ë§ˆì²˜ëŸ¼ ê°•ë ¥í•œ ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ì§€ë…”ìŠµë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/000000/FFFFFF/mp4?text=Guima" },
            "ESFJ": { name: "ë§¤ë‹ˆì € â€˜ë³´ë¹„â€™", keywords: "ì¡°ì •Â·ì¡°ì§Â·ì¼€ì–´", icon: "ğŸ¤", description: "ë›°ì–´ë‚œ ì¡°ì • ëŠ¥ë ¥ê³¼ ì²´ê³„ì ì¸ ì¡°ì§ë ¥ìœ¼ë¡œ ëª¨ë‘ë¥¼ ì¼€ì–´í•˜ëŠ” ë‹¹ì‹ ì€, ë§¤ë‹ˆì € 'ë³´ë¹„'ì²˜ëŸ¼ íŒ€ì˜ ë“ ë“ í•œ ë²„íŒ€ëª©ì´ ë©ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/F97316/FFFFFF/mp4?text=Bobby" },
            "ENFJ": { name: "ì‹¤ë¦° (ì „ì„¤ í—Œí„°)", keywords: "ë©˜í† ë§Â·ì˜í–¥ë ¥Â·í†µì°°", icon: "ğŸŒŸ", description: "íƒ€ì¸ì„ ë©˜í† ë§í•˜ê³  ê¸ì •ì ì¸ ì˜í–¥ë ¥ì„ í–‰ì‚¬í•˜ë©° í†µì°°ë ¥ ìˆëŠ” ë‹¹ì‹ ì€, ì „ì„¤ í—Œí„° ì‹¤ë¦°ì²˜ëŸ¼ ì£¼ë³€ì— ì˜ê°ì„ ì¤ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/8B5CF6/FFFFFF/mp4?text=Celine" },
            "ESTJ": { name: "â€˜ì†Œë‹¤íŒâ€™ íŒ¬ ì•„ì¤Œë§ˆ", keywords: "ì—´ì •Â·ë¦¬ë”Â·ê·œì¹™", icon: "ğŸ¤", description: "ë„˜ì¹˜ëŠ” ì—´ì •ê³¼ íƒ€ê³ ë‚œ ë¦¬ë”ì‹­, ê·¸ë¦¬ê³  ëª…í™•í•œ ê·œì¹™ì„ ì¤‘ì‹œí•˜ëŠ” ë‹¹ì‹ ì€, 'ì†Œë‹¤íŒ' íŒ¬ ì•„ì¤Œë§ˆì²˜ëŸ¼ ê°•í•œ ì¶”ì§„ë ¥ì„ ê°€ì¡Œì–´ìš”.", videoUrl: "https://placehold.co/150x150/DC2626/FFFFFF/mp4?text=SodaPop+Fan" },
            "ISTJ": { name: "ë‹¤í¬ ì§€ëˆ„", keywords: "ì±…ì„Â·ê·œìœ¨Â·ë‚´ì„±", icon: "ğŸ”’", description: "ê°•í•œ ì±…ì„ê°ê³¼ ì—„ê²©í•œ ê·œìœ¨ì„ ì§€í‚¤ë©° ë‚´ì„±ì ì¸ ë‹¹ì‹ ì€, ë‹¤í¬ ì§€ëˆ„ì²˜ëŸ¼ ë¬µë¬µíˆ ìì‹ ì˜ ê¸¸ì„ ê°€ëŠ” ë¯¿ìŒì§í•œ ì¡´ì¬ì…ë‹ˆë‹¤.", videoUrl: "https://placehold.co/150x150/4B5563/FFFFFF/mp4?text=Dark+Jinu" },
        };

        // MBTI ê¶í•© (ì˜ ë§ëŠ” ì¹œêµ¬ / ì•™ìˆ™ ì¹œêµ¬) - ë‹¨ìˆœí™”ëœ ë§¤í•‘
        const COMPATIBILITY_MAP = {
            "ENTJ": { compatible: "INFP", compatible_desc: "ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ íƒ€ì¸ì„ ì¹˜ìœ í•˜ê³  ì´ìƒì„ ì¶”êµ¬í•˜ëŠ” ì¹œêµ¬", opposite: "ISFP" },
            "ENFP": { compatible: "INTJ", compatible_desc: "ì¹˜ë°€í•œ ì „ëµê³¼ ì•¼ë§ì„ ê°€ì§„ í†µì°°ë ¥ ìˆëŠ” ì¹œêµ¬", opposite: "ISTJ" },
            "ENTP": { compatible: "INFJ", compatible_desc: "ê¹Šì€ ì´ìƒê³¼ ë¹„ì „ì„ ê°€ì§€ê³  í—Œì‹ í•˜ëŠ” ì¹œêµ¬", opposite: "ISFJ" },
            "INFJ": { compatible: "ENTP", compatible_desc: "ë²ˆëœ©ì´ëŠ” ì¬ì¹˜ì™€ ì‹¤í—˜ ì •ì‹ ìœ¼ë¡œ ë³€í™”ë¥¼ ì¶”êµ¬í•˜ëŠ” ì¹œêµ¬", opposite: "ESTP" },
            "ESFP": { compatible: "ISTJ", compatible_desc: "ê°•í•œ ì±…ì„ê°ê³¼ ê·œìœ¨ì„ ì§€í‚¤ëŠ” ë¯¿ìŒì§í•œ ì¹œêµ¬", opposite: "INTJ" },
            "INTP": { compatible: "ENFJ", compatible_desc: "íƒ€ì¸ì„ ë©˜í† ë§í•˜ê³  ê¸ì •ì ì¸ ì˜í–¥ë ¥ì„ ì£¼ëŠ” ì¹œêµ¬", opposite: "ESFJ" },
            "ESTP": { compatible: "INFJ", compatible_desc: "ê¹Šì€ ì´ìƒê³¼ ë¹„ì „ì„ ê°€ì§€ê³  í—Œì‹ í•˜ëŠ” ì¹œêµ¬", opposite: "INFP" },
            "ISFP": { compatible: "ENTJ", compatible_desc: "ê°•ë ¥í•œ ë¦¬ë”ì‹­ê³¼ ì „ëµì ì¸ íŒë‹¨ì„ í•˜ëŠ” ì¹œêµ¬", opposite: "ESTJ" },
            "ISTP": { compatible: "ESFJ", compatible_desc: "ë›°ì–´ë‚œ ì¡°ì • ëŠ¥ë ¥ê³¼ ì¡°ì§ë ¥ìœ¼ë¡œ ëª¨ë‘ë¥¼ ì¼€ì–´í•˜ëŠ” ì¹œêµ¬", opposite: "ENFJ" },
            "ISFJ": { compatible: "ENTP", compatible_desc: "ë²ˆëœ©ì´ëŠ” ì¬ì¹˜ì™€ ì‹¤í—˜ ì •ì‹ ìœ¼ë¡œ ë³€í™”ë¥¼ ì¶”êµ¬í•˜ëŠ” ì¹œêµ¬", opposite: "INTP" },
            "INFP": { compatible: "ENTJ", compatible_desc: "ê°•ë ¥í•œ ë¦¬ë”ì‹­ê³¼ ì „ëµì ì¸ íŒë‹¨ì„ í•˜ëŠ” ì¹œêµ¬", opposite: "ESTP" },
            "INTJ": { compatible: "ENFP", compatible_desc: "ììœ ë¡œìš´ ì˜í˜¼ê³¼ ë„˜ì¹˜ëŠ” ì°½ì˜ë ¥ì„ ê°€ì§„ ì¹œêµ¬", opposite: "ESFP" },
            "ESFJ": { compatible: "ISTP", compatible_desc: "ì˜ˆë¦¬í•œ ê´€ì°°ë ¥ê³¼ ì‹¤ìš©ì„±ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì¹œêµ¬", opposite: "INTP" },
            "ENFJ": { compatible: "INTP", compatible_desc: "ë‚ ì¹´ë¡œìš´ ë¶„ì„ë ¥ê³¼ ëì—†ëŠ” í˜¸ê¸°ì‹¬ì„ ê°€ì§„ ì¹œêµ¬", opposite: "ISTP" },
            "ESTJ": { compatible: "ISFP", compatible_desc: "ìˆœìˆ˜í•œ ê°ì„±ê³¼ ìœ ì—°í•œ ì‚¬ê³ ë¡œ ì„¸ìƒì„ ë°”ë¼ë³´ëŠ” ì¹œêµ¬", opposite: "INFP" },
            "ISTJ": { compatible: "ESFP", compatible_desc: "ë„˜ì¹˜ëŠ” íŒ¬ì„œë¹„ìŠ¤ì™€ íƒ€ê³ ë‚œ ì‚¬êµì„±ì„ ê°€ì§„ ì¹œêµ¬", opposite: "ENFP" },
        };

        // í…ŒìŠ¤íŠ¸ ì‹œì‘ í•¨ìˆ˜
        function startTest() {
            landingPage.classList.add('hidden');
            questionPage.classList.remove('hidden');
            currentQuestionIndex = 0;
            answers.fill(-1); // ë‹µë³€ ì´ˆê¸°í™”
            displayQuestion();
        }

        // ì§ˆë¬¸ í‘œì‹œ í•¨ìˆ˜
        function displayQuestion() {
            if (currentQuestionIndex < questions.length) {
                const q = questions[currentQuestionIndex];
                questionNumberElem.textContent = `${currentQuestionIndex + 1} / ${questions.length}`;
                questionTextElem.textContent = q.q;
                optionAButton.textContent = q.a;
                optionBButton.textContent = q.b;

                // ì„ íƒëœ ì˜µì…˜ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
                optionAButton.classList.remove('selected');
                optionBButton.classList.remove('selected');

                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
            } else {
                calculateResult();
            }
        }

        // ë‹µë³€ ì„ íƒ ì²˜ë¦¬ í•¨ìˆ˜
        function handleAnswer(value) {
            answers[currentQuestionIndex] = value;
            currentQuestionIndex++;
            displayQuestion();
        }

        // MBTI ê²°ê³¼ ê³„ì‚° í•¨ìˆ˜
        function calculateResult() {
            const scores = { EI: 0, SN: 0, TF: 0, JP: 0 };

            // ê° ì¶•ë³„ ì ìˆ˜ ê³„ì‚° (2ë¬¸í•­ì”©)
            // E-I: index 0-1
            for (let i = 0; i < 2; i++) {
                scores.EI += answers[i];
            }
            // S-N: index 2-3
            for (let i = 2; i < 4; i++) {
                scores.SN += answers[i];
            }
            // T-F: index 4-5
            for (let i = 4; i < 6; i++) {
                scores.TF += answers[i];
            }
            // J-P: index 6-7
            for (let i = 6; i < 8; i++) {
                scores.JP += answers[i];
            }

            // MBTI ìœ í˜• ê²°ì • (2ì  ë§Œì ì—ì„œ 1ì  ì´ìƒì´ë©´ ì•ìª½ ê¸€ì, 0ì ì´ë©´ ë’·ìª½ ê¸€ì)
            const ei = scores.EI >= 1 ? "E" : "I"; // 2ê°œ ì¤‘ 1ê°œ ì´ìƒ Aë©´ E, ì•„ë‹ˆë©´ I
            const sn = scores.SN >= 1 ? "S" : "N";
            const tf = scores.TF >= 1 ? "T" : "F";
            const jp = scores.JP >= 1 ? "J" : "P";

            const mbtiType = `${ei}${sn}${tf}${jp}`;
            displayResult(mbtiType);
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function displayResult(mbtiType) {
            questionPage.classList.add('hidden');
            resultPage.classList.remove('hidden');

            const characterData = MBTI_DATA[mbtiType];
            const compatibility = COMPATIBILITY_MAP[mbtiType];

            if (characterData) {
                resultCharacterNameElem.textContent = characterData.name;
                resultMbtiElem.textContent = `MBTI: ${mbtiType}`;
                resultDescriptionElem.textContent = characterData.description;
                
                // ë¹„ë””ì˜¤ ì„¤ì •
                characterVideoElem.querySelector('source').src = characterData.videoUrl;
                characterVideoElem.load(); // ë¹„ë””ì˜¤ ì†ŒìŠ¤ ë³€ê²½ í›„ ë‹¤ì‹œ ë¡œë“œ
                characterVideoElem.classList.remove('hidden'); // ë¹„ë””ì˜¤ í‘œì‹œ
                characterIconElem.classList.add('hidden'); // ì„ì‹œ ì•„ì´ì½˜ ìˆ¨ê¹€

                // ë¹„ë””ì˜¤ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ì•„ì´ì½˜ í‘œì‹œ (onerrorëŠ” source íƒœê·¸ì— ì§ì ‘ ì ìš© ë¶ˆê°€í•˜ì—¬ JSë¡œ ì²˜ë¦¬)
                characterVideoElem.onerror = () => {
                    characterVideoElem.classList.add('hidden');
                    characterIconElem.classList.remove('hidden');
                    console.error('Video failed to load for:', characterData.name);
                };


                // ì˜ ë§ëŠ” ì¹œêµ¬
                const compatibleChar = MBTI_DATA[compatibility.compatible];
                compatibleFriendNameElem.textContent = compatibleChar.name;
                compatibleFriendMbtiElem.textContent = `MBTI: ${compatibility.compatible}`;
                compatibleFriendDescriptionElem.textContent = compatibleChar.description;

                // ì•™ìˆ™ ì¹œêµ¬
                const oppositeChar = MBTI_DATA[compatibility.opposite];
                oppositeFriendNameElem.textContent = oppositeChar.name;
                oppositeFriendMbtiElem.textContent = `MBTI: ${compatibility.opposite}`;
                oppositeFriendKeywordsElem.textContent = oppositeChar.keywords;

            } else {
                resultCharacterNameElem.textContent = "ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                resultMbtiElem.textContent = "";
                resultDescriptionElem.textContent = "";
                characterVideoElem.classList.add('hidden'); // ë¹„ë””ì˜¤ ìˆ¨ê¹€
                characterIconElem.classList.remove('hidden'); // ì„ì‹œ ì•„ì´ì½˜ í‘œì‹œ
                compatibleFriendNameElem.textContent = "";
                compatibleFriendMbtiElem.textContent = "";
                compatibleFriendDescriptionElem.textContent = "";
                oppositeFriendNameElem.textContent = "";
                oppositeFriendMbtiElem.textContent = "";
                oppositeFriendKeywordsElem.textContent = "";
            }
        }

        // í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ ì‹œì‘ í•¨ìˆ˜
        function restartTest() {
            resultPage.classList.add('hidden');
            landingPage.classList.remove('hidden');
            currentQuestionIndex = 0;
            answers.fill(-1);
            progressBar.style.width = '0%';
            // í…ŒìŠ¤íŠ¸ ì¬ì‹œì‘ ì‹œ ë¹„ë””ì˜¤ì™€ ì•„ì´ì½˜ ìƒíƒœ ì´ˆê¸°í™”
            characterVideoElem.classList.add('hidden');
            characterIconElem.classList.remove('hidden');
            characterVideoElem.querySelector('source').src = ""; // ë¹„ë””ì˜¤ ì†ŒìŠ¤ ì´ˆê¸°í™”
            characterVideoElem.load(); // ë¹„ë””ì˜¤ ë¡œë“œ ìƒíƒœ ì´ˆê¸°í™”
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startTestBtn.addEventListener('click', startTest);

        optionAButton.addEventListener('click', () => {
            optionAButton.classList.add('selected');
            optionBButton.classList.remove('selected');
            setTimeout(() => handleAnswer(parseInt(optionAButton.dataset.value)), 200); // ì§§ì€ ë”œë ˆì´ í›„ ë‹¤ìŒ ì§ˆë¬¸
        });

        optionBButton.addEventListener('click', () => {
            optionBButton.classList.add('selected');
            optionAButton.classList.remove('selected');
            setTimeout(() => handleAnswer(parseInt(optionBButton.dataset.value)), 200); // ì§§ì€ ë”œë ˆì´ í›„ ë‹¤ìŒ ì§ˆë¬¸
        });

        restartTestBtn.addEventListener('click', restartTest);

        // ê³µìœ  ë²„íŠ¼ (ì‹¤ì œ ê³µìœ  ê¸°ëŠ¥ì€ í”Œë«í¼ì— ë”°ë¼ ë‹¤ë¦„)
        shareResultBtn.addEventListener('click', () => {
            const mbti = resultMbtiElem.textContent.replace('MBTI: ', '');
            const character = resultCharacterNameElem.textContent;
            const shareText = `ì €ëŠ” ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ì—ì„œ ${character} (${mbti}) ìœ í˜•ì´ ë‚˜ì™”ì–´ìš”! ë‹¹ì‹ ì˜ ìœ í˜•ì€ ë¬´ì—‡ì¸ê°€ìš”? #ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤ #MBTIí…ŒìŠ¤íŠ¸`;

            if (navigator.share) {
                navigator.share({
                    title: 'ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ ìºë¦­í„° ìœ í˜• í…ŒìŠ¤íŠ¸',
                    text: shareText,
                    url: window.location.href, // í˜„ì¬ í˜ì´ì§€ URL ê³µìœ 
                }).then(() => console.log('ê³µìœ  ì„±ê³µ'))
                  .catch((error) => console.error('ê³µìœ  ì‹¤íŒ¨', error));
            } else {
                // ì›¹ ê³µìœ  APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°, í…ìŠ¤íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬
                const tempInput = document.createElement('textarea');
                tempInput.value = shareText + '\n' + window.location.href;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹œêµ¬ë“¤ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”.'); // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
            }
        });

        // Hey.D ë§í¬ ë²„íŠ¼ (ì‹¤ì œ ì•±/ì›¹ ë”¥ë§í¬ëŠ” ì—¬ê¸°ì— ì¶”ê°€)
        heyDLinkBtn.addEventListener('click', () => {
            // Hey.D ì•±/ì›¹ ë”¥ë§í¬ URLì„ https://hey-d.ai/ë¡œ ì—…ë°ì´íŠ¸
            window.open('https://hey-d.ai/', '_blank'); 
        });

    </script>
</body>
</html>
