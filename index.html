<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ ìºë¦­í„° ìœ í˜• í…ŒìŠ¤íŠ¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Softer shadow */
            max-width: 600px;
            width: 100%;
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .btn {
            background-image: linear-gradient(to right, #6EE7B7, #34D399); /* Green gradient */
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 9999px; /* Pill shape */
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 211, 153, 0.4);
            border: none;
            cursor: pointer;
            font-size: 1.125rem; /* Larger font */
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 211, 153, 0.6);
        }
        .option-btn {
            background-color: #E0F2F7; /* Light blue */
            color: #2C3E50; /* Dark text */
            padding: 1rem 1.5rem;
            margin: 0.5rem 0;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
            text-align: left;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .option-btn:hover {
            background-color: #B3E0F2; /* Slightly darker blue on hover */
            border-color: #007BFF; /* Blue border on hover */
        }
        .option-btn.selected {
            background-color: #3B82F6; /* Blue */
            color: white;
            border-color: #1D4ED8;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 9999px;
            height: 0.75rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-image: linear-gradient(to right, #3B82F6, #60A5FA); /* Blue gradient */
            width: 0%;
            border-radius: 9999px;
            transition: width 0.3s ease-in-out;
        }
        .character-card {
            background-color: #F8F9FA; /* Off-white */
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            text-align: left;
            width: 100%;
        }
        .character-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 0.5rem;
        }
        .character-card p {
            font-size: 1rem;
            color: #555;
            line-height: 1.5;
        }
        .character-image {
            width: 150px; /* Adjust size as needed */
            height: 150px;
            background-color: #ddd; /* Placeholder background */
            border-radius: 50%;
            margin: 1rem auto;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            color: #888;
            overflow: hidden; /* Ensure content stays within circle */
        }
        /* Simple animation for result display */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .result-section {
            animation: fadeInScale 0.5s ease-out forwards;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            .btn {
                padding: 0.6rem 1.5rem;
                font-size: 1rem;
            }
            .option-btn {
                padding: 0.8rem 1rem;
                font-size: 0.9rem;
            }
            .character-card h3 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">
    <div class="container">
        <!-- ëœë”© í˜ì´ì§€ -->
        <div id="landing-page" class="flex flex-col items-center justify-center">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-6 leading-tight">
                <span class="block">ã€ˆì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ã€‰</span>
                <span class="block mt-2">ë‚´ê°€ ëˆ„êµ¬?</span>
            </h1>
            <p class="text-lg text-gray-600 mb-8">3ë¶„ í…ŒìŠ¤íŠ¸ë¡œ ë‹¹ì‹ ì˜ ì¼€ë°í—Œ ìºë¦­í„° ìœ í˜•ì„ ì•Œì•„ë³´ì„¸ìš”!</p>
            <button id="start-test-btn" class="btn">3ë¶„ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
        </div>

        <!-- ì§ˆë¬¸ í˜ì´ì§€ -->
        <div id="question-page" class="hidden w-full">
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <p id="question-number" class="text-lg text-gray-700 mb-4 font-semibold"></p>
            <h2 id="question-text" class="text-2xl font-bold text-gray-800 mb-8 leading-relaxed"></h2>
            <div class="options-container flex flex-col gap-4">
                <button id="option-a" class="option-btn" data-value="1"></button>
                <button id="option-b" class="option-btn" data-value="0"></button>
            </div>
        </div>

        <!-- ê²°ê³¼ í˜ì´ì§€ -->
        <div id="result-page" class="hidden w-full result-section">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">ë‹¹ì‹ ì˜ ìºë¦­í„°ëŠ”...</h2>
            <div class="character-image">
                <!-- 3D ì• ë‹ˆë©”ì´ì…˜ ëŒ€ì‹  ì„ì‹œ ì´ë¯¸ì§€/ì•„ì´ì½˜ -->
                <span id="character-icon">âœ¨</span>
            </div>
            <h3 id="result-character-name" class="text-4xl font-extrabold text-blue-600 mt-4 mb-2"></h3>
            <p id="result-mbti" class="text-xl font-semibold text-gray-700 mb-6"></p>
            <p id="result-keywords" class="text-md text-gray-600 mb-8"></p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                <div class="character-card">
                    <h3 class="text-blue-500">ì˜ ë§ëŠ” ì¹œêµ¬</h3>
                    <p id="compatible-friend-name" class="text-xl font-semibold text-gray-800"></p>
                    <p id="compatible-friend-mbti" class="text-md text-gray-600"></p>
                    <p id="compatible-friend-keywords" class="text-sm text-gray-500 mt-1"></p>
                </div>
                <div class="character-card">
                    <h3 class="text-red-500">ì•™ìˆ™ ì¹œêµ¬</h3>
                    <p id="opposite-friend-name" class="text-xl font-semibold text-gray-800"></p>
                    <p id="opposite-friend-mbti" class="text-md text-gray-600"></p>
                    <p id="opposite-friend-keywords" class="text-sm text-gray-500 mt-1"></p>
                </div>
            </div>

            <div class="mt-8 flex flex-col gap-4 w-full">
                <button id="share-result-btn" class="btn bg-blue-500 hover:bg-blue-600">ê²°ê³¼ ê³µìœ í•˜ê³  ì¹œêµ¬ ì´ˆëŒ€</button>
                <button id="hey-d-link-btn" class="btn bg-purple-500 hover:bg-purple-600">Hey.Dì—ì„œ ìºë¦­í„°ì™€ ëŒ€í™”í•´ë³´ê¸°</button>
                <button id="restart-test-btn" class="btn bg-gray-400 hover:bg-gray-500">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const landingPage = document.getElementById('landing-page');
        const questionPage = document.getElementById('question-page');
        const resultPage = document.getElementById('result-page');
        const startTestBtn = document.getElementById('start-test-btn');
        const questionNumberElem = document.getElementById('question-number');
        const questionTextElem = document.getElementById('question-text');
        const optionAButton = document.getElementById('option-a');
        const optionBButton = document.getElementById('option-b');
        const progressBar = document.getElementById('progress-bar');

        const resultCharacterNameElem = document.getElementById('result-character-name');
        const resultMbtiElem = document.getElementById('result-mbti');
        const resultKeywordsElem = document.getElementById('result-keywords');
        const characterIconElem = document.getElementById('character-icon');

        const compatibleFriendNameElem = document.getElementById('compatible-friend-name');
        const compatibleFriendMbtiElem = document.getElementById('compatible-friend-mbti');
        const compatibleFriendKeywordsElem = document.getElementById('compatible-friend-keywords');
        const oppositeFriendNameElem = document.getElementById('opposite-friend-name');
        const oppositeFriendMbtiElem = document.getElementById('opposite-friend-mbti');
        const oppositeFriendKeywordsElem = document.getElementById('opposite-friend-keywords');

        const shareResultBtn = document.getElementById('share-result-btn');
        const heyDLinkBtn = document.getElementById('hey-d-link-btn');
        const restartTestBtn = document.getElementById('restart-test-btn');

        // í…ŒìŠ¤íŠ¸ ìƒíƒœ ë³€ìˆ˜
        let currentQuestionIndex = 0;
        let answers = new Array(32).fill(-1); // 0 ë˜ëŠ” 1ë¡œ ì±„ì›Œì§ˆ ë‹µë³€ ë°°ì—´

        // MBTI ì§„ë‹¨ ì„¤ë¬¸ 32 ë¬¸í•­ í’€
        // ê° ë¬¸í•­ì€ [ì§ˆë¬¸ í…ìŠ¤íŠ¸, ì„ íƒì§€ A í…ìŠ¤íŠ¸, ì„ íƒì§€ B í…ìŠ¤íŠ¸, í•´ë‹¹ ì¶•]
        const questions = [
            // E-I ì¶• (index 0-7)
            { q: "ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ì˜ ë„¤íŠ¸ì›Œí‚¹ì€", a: "ì—ë„ˆì§€ ì¶©ì „", b: "ì—ë„ˆì§€ ì†Œëª¨", axis: "EI" }, // Q1
            { q: "í–‰ì‚¬ì—ì„œ ì†Œê°œíŒ… ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´", a: "ë°”ë¡œ OK", b: "ì‹œê°„ì´ í•„ìš”í•˜ë‹¤", axis: "EI" }, // Q10
            { q: "ì·¨ë¯¸ ëª¨ì„ì— ì°¸ì—¬í•œë‹¤ë©´", a: "ì—¬ëŸ¿ê³¼ ì–´ìš¸ë¦¼", b: "í˜¼ì ê¹Šê²Œ íŒŒê³ ë“¦", axis: "EI" }, // Q13
            { q: "ì—¬í–‰ ì¤‘ ì°ì€ ì‚¬ì§„ì€", a: "ì¦‰ì„ì—ì„œ ìŠ¤í† ë¦¬ ì—…ë¡œë“œ", b: "ê·€êµ­ í›„ ì •ë¦¬", axis: "EI" }, // Q15
            { q: "ëŒ€ê·œëª¨ í–‰ì‚¬ì— ì°¸ì„í•˜ëŠ” ê²ƒì€", a: "ì¦ê²ë‹¤", b: "í”¼ê³¤í•˜ë‹¤", axis: "EI" }, // Q21
            { q: "ë‰´ìŠ¤ ì†Œë¹„ ë°©ì‹ì€", a: "ë‹¤ì–‘í•œ ì£¼ì œ í—¤ë“œë¼ì¸", b: "ê´€ì‹¬ ë¶„ì•¼ ì‹¬ì¸µ ê¸°ì‚¬", axis: "EI" }, // Q23
            { q: "ì»¨í¼ëŸ°ìŠ¤ Q&A ì‹œê°„ì—", a: "ì¦‰í¥ì ìœ¼ë¡œ ì§ˆë¬¸", b: "ë©”ëª¨ í›„ ì •ë¦¬", axis: "EI" }, // Q28
            { q: "ì•„ì´ë””ì–´ë¥¼ ì„¤ëª…í•  ë•Œ", a: "ë§ë¡œ ì‹œì—°", b: "ê¸€ì´ë‚˜ ë‹¤ì´ì–´ê·¸ë¨", axis: "EI" }, // Q31

            // S-N ì¶• (index 8-15)
            { q: "ì•„ì´ë””ì–´ ë°œìƒë²•ì€", a: "ë– ì˜¤ë¥´ëŠ” ëŒ€ë¡œ ë¸Œë ˆì¸ìŠ¤í† ë°", b: "ì‚¬ë¡€Â·ë°ì´í„° ë¨¼ì € ì¡°ì‚¬", axis: "SN" }, // Q5
            { q: "ìƒˆë¡œìš´ ê¸°ìˆ ì„ í•™ìŠµí•  ë•Œ", a: "ì§ì ‘ ë§Œì ¸ë³´ë©° ìµí˜", b: "ë§¤ë‰´ì–¼ë¶€í„° ì½ìŒ", axis: "SN" }, // Q8
            { q: "ëª¨ë¥´ëŠ” ë™ë„¤ ì‹ë‹¹ì„ ì„ íƒí•  ë•Œ", a: "í˜„ì¥ ë¶„ìœ„ê¸°Â·ê°ê°", b: "ë¦¬ë·°Â·í‰ì  í™•ì¸", axis: "SN" }, // Q9
            { q: "íŒ€ ë¸Œë ˆì¸ìŠ¤í† ë°ì—ì„œ", a: "ëŒ€í™”ë¡œ ìƒê° í™•ì¥", b: "ë¬¸ì„œë¡œ ì •ë¦¬ í›„ ê³µìœ ", axis: "SN" }, // Q16
            { q: "ìƒˆ ì•±ì˜ UXë¥¼ í‰ê°€í•  ë•Œ", a: "ì§ê´€ì ì¸ ì¸ìƒ", b: "ê°€ì´ë“œë¼ì¸ê³¼ ë¹„êµ", axis: "SN" }, // Q18
            { q: "ìƒˆë¡œìš´ íˆ´ì„ ë„ì…í•  ë•Œ", a: "ë² íƒ€ ë²„ì „ì„ ë°”ë¡œ ì‚¬ìš©", b: "ì•ˆì •í™” í›„ ì‚¬ìš©", axis: "SN" }, // Q24
            { q: "ë¬¸í•™Â·ì˜í™” ì·¨í–¥ì€", a: "ë¯¸ì§€Â·íŒíƒ€ì§€", b: "í˜„ì‹¤Â·ë…¼í”½ì…˜", axis: "SN" }, // Q27
            { q: "ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì‹œì‘í•  ë•Œ", a: "ë¨¼ì € ê²½í—˜", b: "ê°•ì˜Â·êµì¬ë¶€í„°", axis: "SN" }, // Q32

            // T-F ì¶• (index 16-23)
            { q: "íšŒì˜ ì¤‘ ë…¼ìŸì´ ìƒê¸°ë©´", a: "ë…¼ë¦¬ë¡œ ì„¤ë“", b: "ë¶„ìœ„ê¸° ì¡°ìœ¨", axis: "TF" }, // Q3
            { q: "ì¹œêµ¬ì—ê²Œ ì¡°ì–¸í•  ë•Œ", a: "íŒ©íŠ¸ ê¸°ë°˜ í•´ê²°ì±…", b: "ê³µê°Â·ìœ„ë¡œ ì¤‘ì‹¬", axis: "TF" }, // Q6
            { q: "í° ì˜ì‚¬ê²°ì • ì „ì—ëŠ”", a: "ì¥ë‹¨ì  í‘œ ì‘ì„±", b: "ì§ê° ë”°ë¦„", axis: "TF" }, // Q11
            { q: "í”„ë¡œì íŠ¸ ì˜¤ë¥˜ ì‹œ", a: "ì›ì¸ ë¡œê¹… í›„ ìˆ˜ì •", b: "ëŠë‚Œì  ëŠë‚Œìœ¼ë¡œ ìˆ˜ì •", axis: "TF" }, // Q14
            { q: "ì¹œêµ¬ ìƒì¼ ì„ ë¬¼ì„ ê³ ë¥¼ ë•Œ", a: "ì„œí”„ë¼ì´ì¦ˆ ì´ë²¤íŠ¸", b: "í•„ìš”í•œ ê²ƒ ì§ì ‘ ë¬¼ì–´ë´„", axis: "TF" }, // Q19
            { q: "ë¬¸ì œ í•´ê²° ì ‘ê·¼ ë°©ì‹ì€", a: "ì´ë¡ -ì›ì¹™ ìš°ì„ ", b: "ì‚¬ë¡€-ê²½í—˜ ìš°ì„ ", axis: "TF" }, // Q20
            { q: "í”¼ë“œë°±ì„ ì¤„ ë•Œ", a: "ì§ì„¤ì  ì½”ë©˜íŠ¸", b: "ì™„ì¶© í‘œí˜„", axis: "TF" }, // Q25
            { q: "ê°ˆë“± ìƒí™©ì—ì„œ", a: "ê·œì¹™Â·ì›ì¹™ ì ìš©", b: "ê´€ê³„Â·ê°ì • ê³ ë ¤", axis: "TF" }, // Q29

            // J-P ì¶• (index 24-31)
            { q: "ì£¼ë§ ê³„íšì€", a: "ì¦‰í¥ìœ¼ë¡œ ì¦ê¸´ë‹¤", b: "ë¯¸ë¦¬ ì„¸ì„¸íˆ ì§ ë‹¤", axis: "JP" }, // Q2
            { q: "íœ´ê°€ ì‚¬ì§„ ì •ë¦¬ ë°©ì‹ì€", a: "í´ë”ë³„ ì²´ê³„ì  ë¶„ë¥˜", b: "ê¸°ë¶„ ë‚´í‚¤ë©´ ì •ë¦¬", axis: "JP" }, // Q4
            { q: "ì¶œì¥ ì „ë‚  ì§ ì‹¸ê¸°ëŠ”", a: "ì¼ì£¼ì¼ ì „ ì™„ë£Œ", b: "ë‹¹ì¼ ì•„ì¹¨ì— ê¸‰íˆ", axis: "JP" }, // Q7
            { q: "ì‘ì—… ì¤‘ ì•Œë¦¼ ìŒì´ ìš¸ë¦¬ë©´", a: "ì¦‰ì‹œ í™•ì¸", b: "ëª°ì•„ì„œ í™•ì¸", axis: "JP" }, // Q12
            { q: "ì¹¼í‡´ ì§ì „ ì¶”ê°€ ìš”ì²­ì´ ì˜¤ë©´", a: "ì¦‰ì‹œ ì²˜ë¦¬", b: "ë‹¤ìŒë‚  ì²˜ë¦¬", axis: "JP" }, // Q17
            { q: "ë§ˆê° ì§ì „ ë³€ê²½ ì‚¬í•­ì´ ìƒê¸°ë©´", a: "ìœ ì—°í•˜ê²Œ ìˆ˜ìš©", b: "ê³„íš ìœ ì§€", axis: "JP" }, // Q22
            { q: "ì¼ì • ë³€í™”ì— ëŒ€í•´", a: "ì¦‰í¥ì ìœ¼ë¡œ ëŒ€ì‘", b: "ì¬ê³„íš í•„ìˆ˜", axis: "JP" }, // Q26
            { q: "ì—…ë¬´ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ”", a: "ì„¸ë¶„í™”Â·ì‹œê°„ ë°•ìŠ¤", b: "í° í‹€ë§Œ ê¸°ë¡", axis: "JP" }, // Q30
        ];

        // ìºë¦­í„° & MBTI ë§¤í•‘ ë° í‚¤ì›Œë“œ
        const MBTI_DATA = {
            "ENTJ": { name: "ë£¨ë¯¸ (Huntr/x)", keywords: "ë¦¬ë”ì‹­Â·ì „ëµÂ·ê²°ë‹¨", icon: "ğŸ‘‘" },
            "ENFP": { name: "ë¯¸ë¼ (Huntr/x)", keywords: "ììœ Â·ì°½ì˜Â·ì—´ì •", icon: "ğŸŒˆ" },
            "ENTP": { name: "ì¡°ì´ (Huntr/x)", keywords: "ì¬ì¹˜Â·ì‹¤í—˜Â·ë³€í™”", icon: "ğŸ’¡" },
            "INFJ": { name: "ì§€ëˆ„ (Saja Boys)", keywords: "ì´ìƒÂ·ë¹„ì „Â·í—Œì‹ ", icon: "âœ¨" },
            "ESFP": { name: "ë¡œë§¨ìŠ¤ ì‚¬ì", keywords: "íŒ¬ì„œë¹„ìŠ¤Â·ì‚¬êµÂ·ê¸ì •", icon: "ğŸ’–" },
            "INTP": { name: "ë¯¸ìŠ¤í„°ë¦¬ ì‚¬ì", keywords: "ë¶„ì„Â·í˜¸ê¸°ì‹¬Â·ë…ë¦½", icon: "ğŸ”" },
            "ESTP": { name: "ì• ë¹„ ì‚¬ì", keywords: "ì•¡ì…˜Â·ì—ë„ˆì§€Â·ì¦‰í¥", icon: "ğŸ’¥" },
            "ISFP": { name: "ë² ì´ë¹„ ì‚¬ì", keywords: "ìˆœìˆ˜Â·ê°ì„±Â·ìœ ì—°", icon: "ğŸŒ¸" },
            "ISTP": { name: "ê¹Œì¹˜ â€˜ì¨ì”¨â€™", keywords: "ê´€ì°°Â·ì •ì°°Â·ì‹¤ìš©", icon: "ğŸ› ï¸" },
            "ISFJ": { name: "í˜¸ë‘ì´ â€˜ë”í”¼â€™", keywords: "ë³´í˜¸Â·í—Œì‹ Â·ì•ˆì •", icon: "ğŸ»" },
            "INFP": { name: "í•œì•½ë°© ì•„ì €ì”¨", keywords: "ì¹˜ìœ Â·ì´ìƒì£¼ì˜Â·êµê°", icon: "ğŸŒ¿" },
            "INTJ": { name: "ê·€ë§ˆ (ì•…ë§ˆì™•)", keywords: "ì „ëµÂ·ì•¼ë§Â·í†µì œ", icon: "ğŸ˜ˆ" },
            "ESFJ": { name: "ë§¤ë‹ˆì € â€˜ë³´ë¹„â€™", keywords: "ì¡°ì •Â·ì¡°ì§Â·ì¼€ì–´", icon: "ğŸ¤" },
            "ENFJ": { name: "ì‹¤ë¦° (ì „ì„¤ í—Œí„°)", keywords: "ë©˜í† ë§Â·ì˜í–¥ë ¥Â·í†µì°°", icon: "ğŸŒŸ" },
            "ESTJ": { name: "â€˜ì†Œë‹¤íŒâ€™ íŒ¬ ì•„ì¤Œë§ˆ", keywords: "ì—´ì •Â·ë¦¬ë”Â·ê·œì¹™", icon: "ğŸ¤" },
            "ISTJ": { name: "ë‹¤í¬ ì§€ëˆ„", keywords: "ì±…ì„Â·ê·œìœ¨Â·ë‚´ì„±", icon: "ğŸ”’" },
        };

        // MBTI ê¶í•© (ì˜ ë§ëŠ” ì¹œêµ¬ / ì•™ìˆ™ ì¹œêµ¬) - ë‹¨ìˆœí™”ëœ ë§¤í•‘
        const COMPATIBILITY_MAP = {
            "ENTJ": { compatible: "INFP", opposite: "ISFP" },
            "ENFP": { compatible: "INTJ", opposite: "ISTJ" },
            "ENTP": { compatible: "INFJ", opposite: "ISFJ" },
            "INFJ": { compatible: "ENTP", opposite: "ESTP" },
            "ESFP": { compatible: "ISTJ", opposite: "INTJ" },
            "INTP": { compatible: "ENFJ", opposite: "ESFJ" },
            "ESTP": { compatible: "INFJ", opposite: "INFP" },
            "ISFP": { compatible: "ENTJ", opposite: "ESTJ" },
            "ISTP": { compatible: "ESFJ", opposite: "ENFJ" },
            "ISFJ": { compatible: "ENTP", opposite: "INTP" },
            "INFP": { compatible: "ENTJ", opposite: "ESTP" },
            "INTJ": { compatible: "ENFP", opposite: "ESFP" },
            "ESFJ": { compatible: "ISTP", opposite: "INTP" },
            "ENFJ": { compatible: "INTP", opposite: "ISTP" },
            "ESTJ": { compatible: "ISFP", opposite: "INFP" },
            "ISTJ": { compatible: "ESFP", opposite: "ENFP" },
        };

        // í…ŒìŠ¤íŠ¸ ì‹œì‘ í•¨ìˆ˜
        function startTest() {
            landingPage.classList.add('hidden');
            questionPage.classList.remove('hidden');
            currentQuestionIndex = 0;
            answers.fill(-1); // ë‹µë³€ ì´ˆê¸°í™”
            displayQuestion();
        }

        // ì§ˆë¬¸ í‘œì‹œ í•¨ìˆ˜
        function displayQuestion() {
            if (currentQuestionIndex < questions.length) {
                const q = questions[currentQuestionIndex];
                questionNumberElem.textContent = `${currentQuestionIndex + 1} / ${questions.length}`;
                questionTextElem.textContent = q.q;
                optionAButton.textContent = q.a;
                optionBButton.textContent = q.b;

                // ì„ íƒëœ ì˜µì…˜ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
                optionAButton.classList.remove('selected');
                optionBButton.classList.remove('selected');

                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
            } else {
                calculateResult();
            }
        }

        // ë‹µë³€ ì„ íƒ ì²˜ë¦¬ í•¨ìˆ˜
        function handleAnswer(value) {
            answers[currentQuestionIndex] = value;
            currentQuestionIndex++;
            displayQuestion();
        }

        // MBTI ê²°ê³¼ ê³„ì‚° í•¨ìˆ˜
        function calculateResult() {
            const scores = { EI: 0, SN: 0, TF: 0, JP: 0 };

            // ê° ì¶•ë³„ ì ìˆ˜ ê³„ì‚°
            // E-I: Q1, Q10, Q13, Q15, Q21, Q23, Q28, Q31 (index 0-7)
            for (let i = 0; i < 8; i++) {
                scores.EI += answers[i];
            }
            // S-N: Q5, Q8, Q9, Q16, Q18, Q24, Q27, Q32 (index 8-15)
            for (let i = 8; i < 16; i++) {
                scores.SN += answers[i];
            }
            // T-F: Q3, Q6, Q11, Q14, Q19, Q20, Q25, Q29 (index 16-23)
            for (let i = 16; i < 24; i++) {
                scores.TF += answers[i];
            }
            // J-P: Q2, Q4, Q7, Q12, Q17, Q22, Q26, Q30 (index 24-31)
            for (let i = 24; i < 32; i++) {
                scores.JP += answers[i];
            }

            // MBTI ìœ í˜• ê²°ì •
            const ei = scores.EI >= 4 ? "E" : "I";
            const sn = scores.SN >= 4 ? "S" : "N";
            const tf = scores.TF >= 4 ? "T" : "F";
            const jp = scores.JP >= 4 ? "J" : "P";

            const mbtiType = `${ei}${sn}${tf}${jp}`;
            displayResult(mbtiType);
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function displayResult(mbtiType) {
            questionPage.classList.add('hidden');
            resultPage.classList.remove('hidden');

            const characterData = MBTI_DATA[mbtiType];
            const compatibility = COMPATIBILITY_MAP[mbtiType];

            if (characterData) {
                resultCharacterNameElem.textContent = characterData.name;
                resultMbtiElem.textContent = `MBTI: ${mbtiType}`;
                resultKeywordsElem.textContent = characterData.keywords;
                characterIconElem.textContent = characterData.icon;

                // ì˜ ë§ëŠ” ì¹œêµ¬
                const compatibleChar = MBTI_DATA[compatibility.compatible];
                compatibleFriendNameElem.textContent = compatibleChar.name;
                compatibleFriendMbtiElem.textContent = `MBTI: ${compatibility.compatible}`;
                compatibleFriendKeywordsElem.textContent = compatibleChar.keywords;

                // ì•™ìˆ™ ì¹œêµ¬
                const oppositeChar = MBTI_DATA[compatibility.opposite];
                oppositeFriendNameElem.textContent = oppositeChar.name;
                oppositeFriendMbtiElem.textContent = `MBTI: ${compatibility.opposite}`;
                oppositeFriendKeywordsElem.textContent = oppositeChar.keywords;

            } else {
                resultCharacterNameElem.textContent = "ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                resultMbtiElem.textContent = "";
                resultKeywordsElem.textContent = "";
                characterIconElem.textContent = "â“";
                compatibleFriendNameElem.textContent = "";
                compatibleFriendMbtiElem.textContent = "";
                compatibleFriendKeywordsElem.textContent = "";
                oppositeFriendNameElem.textContent = "";
                oppositeFriendMbtiElem.textContent = "";
                oppositeFriendKeywordsElem.textContent = "";
            }
        }

        // í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ ì‹œì‘ í•¨ìˆ˜
        function restartTest() {
            resultPage.classList.add('hidden');
            landingPage.classList.remove('hidden');
            currentQuestionIndex = 0;
            answers.fill(-1);
            progressBar.style.width = '0%';
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startTestBtn.addEventListener('click', startTest);

        optionAButton.addEventListener('click', () => {
            optionAButton.classList.add('selected');
            optionBButton.classList.remove('selected');
            setTimeout(() => handleAnswer(parseInt(optionAButton.dataset.value)), 200); // ì§§ì€ ë”œë ˆì´ í›„ ë‹¤ìŒ ì§ˆë¬¸
        });

        optionBButton.addEventListener('click', () => {
            optionBButton.classList.add('selected');
            optionAButton.classList.remove('selected');
            setTimeout(() => handleAnswer(parseInt(optionBButton.dataset.value)), 200); // ì§§ì€ ë”œë ˆì´ í›„ ë‹¤ìŒ ì§ˆë¬¸
        });

        restartTestBtn.addEventListener('click', restartTest);

        // ê³µìœ  ë²„íŠ¼ (ì‹¤ì œ ê³µìœ  ê¸°ëŠ¥ì€ í”Œë«í¼ì— ë”°ë¼ ë‹¤ë¦„)
        shareResultBtn.addEventListener('click', () => {
            const mbti = resultMbtiElem.textContent.replace('MBTI: ', '');
            const character = resultCharacterNameElem.textContent;
            const shareText = `ì €ëŠ” ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ì—ì„œ ${character} (${mbti}) ìœ í˜•ì´ ë‚˜ì™”ì–´ìš”! ë‹¹ì‹ ì˜ ìœ í˜•ì€ ë¬´ì—‡ì¸ê°€ìš”? #ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤ #MBTIí…ŒìŠ¤íŠ¸`;

            if (navigator.share) {
                navigator.share({
                    title: 'ì¼€ì´íŒ ë°ëª¬ í—Œí„°ìŠ¤ ìºë¦­í„° ìœ í˜• í…ŒìŠ¤íŠ¸',
                    text: shareText,
                    url: window.location.href, // í˜„ì¬ í˜ì´ì§€ URL ê³µìœ 
                }).then(() => console.log('ê³µìœ  ì„±ê³µ'))
                  .catch((error) => console.error('ê³µìœ  ì‹¤íŒ¨', error));
            } else {
                // ì›¹ ê³µìœ  APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°, í…ìŠ¤íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬
                const tempInput = document.createElement('textarea');
                tempInput.value = shareText + '\n' + window.location.href;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹œêµ¬ë“¤ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”.'); // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
            }
        });

        // Hey.D ë§í¬ ë²„íŠ¼ (ì‹¤ì œ ì•±/ì›¹ ë”¥ë§í¬ëŠ” ì—¬ê¸°ì— ì¶”ê°€)
        heyDLinkBtn.addEventListener('click', () => {
            // Hey.D ì•±/ì›¹ ë”¥ë§í¬ URLì„ https://hey-d.ai/ë¡œ ì—…ë°ì´íŠ¸
            window.open('https://hey-d.ai/', '_blank'); 
        });

    </script>
</body>
</html>
